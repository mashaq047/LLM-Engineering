<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Website Summarizer</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">

  <style>
    
    body {
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
      color: #e0e0e0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background: rgba(255, 255, 255, 0.05);
      padding: 2rem;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(0, 255, 255, 0.2);
      width: 90%;
      max-width: 600px;
      text-align: center;
      backdrop-filter: blur(10px);
    }

    h2 {
      margin-bottom: 1.5rem;
      color: #00ffff;
    }

    input[type="text"] {
      width: 100%;
      padding: 0.8rem;
      font-size: 1rem;
      border-radius: 10px;
      border: none;
      outline: none;
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
    }

    /* Default futuristic button */
button {
  background: none;
  color: #00ffff;
  border: 2px solid #00ffff;
  padding: 0.8rem 2rem;
  font-size: 1.1rem;
  font-family: 'Orbitron', sans-serif;
  cursor: pointer;
  transition: all 0.4s ease;
  position: relative;
  z-index: 1;
  border-radius: 6px;
  text-transform: uppercase;
  letter-spacing: 2px;
  overflow: hidden;
}

button::before {
  content: "";
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: linear-gradient(120deg, #00ffff, #007777, #00ffff);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.5s ease;
  z-index: -1;
}

button:hover::before {
  transform: scaleX(1);
}

button:hover {
  color: black;
}

/* Loading State */
button.loading {
  color: black;
  background: linear-gradient(120deg, #00ffff, #007777, #00ffff);
  animation: pulse-bg 2s infinite;
}

@keyframes pulse-bg {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.3); }
  100% { filter: brightness(1); }
}

button:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

/* Spinner */
.spinner {
  margin: 2rem auto;
  width: 56px;
  height: 56px;
  border: 5px solid rgba(0, 255, 255, 0.2);
  border-top: 5px solid #00ffff;
  border-radius: 50%;
  animation: spin 1.1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}


@keyframes pulse {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

    .summary {
      margin-top: 2rem;
      background-color: rgba(255, 255, 255, 0.07);
      padding: 1rem;
      border-radius: 10px;
      white-space: pre-wrap;
      text-align: left;
      color: #c0f7ff;
      font-family: monospace;
    }

    .hidden {
      display: none;
    }
    
#particle-canvas {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  background: transparent;
}

.svg-loader {
  margin: 2rem auto;
  display: block;
  animation: rotate 2s linear infinite;
  filter: drop-shadow(0 0 10px #00ffff);
}

.svg-loader .ring {
  fill: none;
  stroke: #00ffff;
  stroke-width: 2;
  opacity: 0.2;
}

.svg-loader .dot {
  fill: #00ffff;
  animation: orbit 2s linear infinite;
  transform-origin: 50px 50px;
}

@keyframes rotate {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes orbit {
  0%   { transform: rotate(0deg) translateX(35px) rotate(0deg); }
  100% { transform: rotate(360deg) translateX(35px) rotate(-360deg); }
}

  </style>
</head>
<body>
<canvas id="particle-canvas"></canvas>

  <div class="container">
    <h2>AI Website Summarizer</h2>

    <div id="inputSection">
      <input type="text" id="urlInput" placeholder="Enter website URL..." />
      <button id="summarizeBtn" style="margin-top: 1.5rem;">Summarize</button>
    </div>

    <div id="summarySection" class="hidden">
      <div id="summary" class="summary"></div>
      <button id="resetBtn" style="margin-top: 1.5rem;">Summarize Another</button>
    </div>
  </div>

  <!-- Markdown parser -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<script>
  const summarizeBtn = document.getElementById('summarizeBtn');
  const resetBtn = document.getElementById('resetBtn');
  const urlInput = document.getElementById('urlInput');
  const inputSection = document.getElementById('inputSection');
  const summarySection = document.getElementById('summarySection');
  const summaryDiv = document.getElementById('summary');

  const spinner = document.createElement('div');
spinner.innerHTML = `
  <svg class="svg-loader" viewBox="0 0 100 100" width="80" height="80">
    <circle class="ring" cx="50" cy="50" r="45" />
    <circle class="dot" cx="50" cy="15" r="5" />
  </svg>
`;


  summarizeBtn.addEventListener('click', async () => {
    const url = urlInput.value.trim();
    if (!url) return alert("Please enter a website URL.");

    // Disable button and show animation
    summarizeBtn.disabled = true;
    summarizeBtn.classList.add('loading');
    summarizeBtn.textContent = "Summarizing...";
    resetBtn.style.display = "none";

    inputSection.classList.add('hidden');
    summaryDiv.innerHTML = '';
    summaryDiv.appendChild(spinner);
    spinner.classList.remove('hidden');
    summarySection.classList.remove('hidden');

    try {
      const res = await fetch('http://localhost:8000/api/summarize', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({ url })
      });

      const data = await res.json();
      spinner.classList.add('hidden');

      if (data.summary) {
        const rawText = marked.parse(data.summary);
        typeText(summaryDiv, rawText);
      } else {
        summaryDiv.innerHTML = `❌ Error: ${data.error}`;
      }
    } catch (error) {
      spinner.classList.add('hidden');
      summaryDiv.innerHTML = `⚠️ Failed to connect to server: ${error.message}`;
    } finally {
      summarizeBtn.disabled = false;
      summarizeBtn.classList.remove('loading');
      summarizeBtn.textContent = "Summarize";
      resetBtn.style.display = "inline-block";
    }
  });

  resetBtn.addEventListener('click', () => {
    summaryDiv.innerHTML = '';
    urlInput.value = '';
    summarySection.classList.add('hidden');
    inputSection.classList.remove('hidden');
    resetBtn.style.display = "none";
  });

  function typeText(container, htmlContent) {
    container.innerHTML = '';
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = htmlContent;
    const text = tempDiv.innerText;

    let i = 0;
    function type() {
      if (i < text.length) {
        container.innerHTML += text.charAt(i);
        i++;
        setTimeout(type, 10);
      }
    }
    type();
  }
</script>


<script>
  const canvas = document.getElementById('particle-canvas');
  const ctx = canvas.getContext('2d');
  let particles = [];

  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  class Particle {
    constructor() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.vx = (Math.random() - 0.5) * 0.8;
      this.vy = (Math.random() - 0.5) * 0.8;
      this.radius = 1.5 + Math.random() * 1.5;
    }

    move() {
      this.x += this.vx;
      this.y += this.vy;
      if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
      if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
    }

    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fillStyle = '#00ffff';
      ctx.fill();
    }
  }

  function connect(p1, p2) {
    const dx = p1.x - p2.x;
    const dy = p1.y - p2.y;
    const dist = Math.sqrt(dx * dx + dy * dy);
    if (dist < 100) {
      ctx.strokeStyle = 'rgba(0, 255, 255, 0.2)';
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();
    }
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => p.move());
    for (let i = 0; i < particles.length; i++) {
      particles[i].draw();
      for (let j = i + 1; j < particles.length; j++) {
        connect(particles[i], particles[j]);
      }
    }
    requestAnimationFrame(animate);
  }

  function initParticles(count = 80) {
    particles = [];
    for (let i = 0; i < count; i++) {
      particles.push(new Particle());
    }
  }

  initParticles();
  animate();
</script>

</body>
</html>
